

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Operator &mdash; Nextflow 0.6.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:'./',
        VERSION:'0.6.0',
        COLLAPSE_INDEX:false,
        FILE_SUFFIX:'.html',
        HAS_SOURCE:  true
      };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
    <link rel="top" title="Nextflow 0.6.0 documentation" href="index.html"/>
        <link rel="next" title="Process" href="process.html"/>
        <link rel="prev" title="Channel" href="channel.html"/> 

  <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="icon icon-home"> Nextflow</a>
        <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
  <input type="text" name="q" placeholder="Search docs" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Get started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="install.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#verify-it">Verify it</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="basic.html">Basic concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="channel.html">Channel</a><ul>
<li class="toctree-l2"><a class="reference internal" href="channel.html#channel-factory">Channel factory</a></li>
<li class="toctree-l2"><a class="reference internal" href="channel.html#binding-values">Binding values</a></li>
<li class="toctree-l2"><a class="reference internal" href="channel.html#observing-events">Observing events</a></li>
<li class="toctree-l2"><a class="reference internal" href="channel.html#special-messages">Special messages</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Operator</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#filtering-operators">Filtering operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="#transforming-operators">Transforming operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="#combining-operators">Combining operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="#forking-operators">Forking operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="#math-operators">Math operators</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="process.html">Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Configuration file</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top">
        <i data-toggle="wy-nav-top" class="icon icon-reorder"></i>
        <a href="index.html">Nextflow</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <ul class="wy-breadcrumbs">
  <li><a href="index.html">Docs</a> &raquo;</li>
  <li><a href="">Operator</a></li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="_sources/operator.txt" rel="nofollow"> View page source</a>
      
    </li>
</ul>
<hr/>

          
  <div class="section" id="operator">
<h1>Operator<a class="headerlink" href="#operator" title="Permalink to this headline">¶</a></h1>
<p>Dataflow <cite>operators</cite> are methods that are be used to connect channels each other or transforms values
emitted by channels by applying some user provided function.</p>
<div class="section" id="filtering-operators">
<h2>Filtering operators<a class="headerlink" href="#filtering-operators" title="Permalink to this headline">¶</a></h2>
<div class="section" id="filter">
<h3>filter( )<a class="headerlink" href="#filter" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">filter(</span> <span class="pre">)</span></tt> operator allows you to filter data in the pipeline by using a boolean predicate. For example:</p>
<div class="highlight-python"><pre>Channel
    .from( 1, 2, 3, 4, 5 )
    .filter { it % 2 == 1 }
    .subscribe { println it }</pre>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="mi">1</span>
<span class="mi">3</span>
<span class="mi">5</span>
</pre></div>
</div>
</div>
<div class="section" id="grep">
<h3>grep( )<a class="headerlink" href="#grep" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">grep(</span> <span class="pre">)</span></tt> operator allows to filter a channel by discarding all item that do not meet the specified condition. The condition
can be a regular expression, a class, a literal value or a boolean expression.</p>
<p>Example using a regular expression:</p>
<div class="highlight-python"><pre>Channel
    .from( 'a', 'b', 'aa', 'bc', 3, 4.5 )
    .grep( ~/a+/ )
    .subscribe { println it }</pre>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="n">a</span>
<span class="n">aa</span>
</pre></div>
</div>
<p>Example specifying the class <tt class="docutils literal"><span class="pre">Number</span></tt> to discard all but the numbers:</p>
<div class="highlight-python"><pre>Channel
    .from( 'a', 'b', 'aa', 'bc', 3, 4.5 )
    .grep( Number )
    .subscribe { println it }</pre>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="mi">3</span>
<span class="mf">4.5</span>
</pre></div>
</div>
<p>Example using a boolean expression:</p>
<div class="highlight-python"><pre>Channel
    .from( 'a', 'b', 'aa', 'bc', 3, 4.5 )
    .grep { it.toString().size() == 1 }
    .subscribe { println it }</pre>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="n">a</span>
<span class="n">aa</span>
<span class="mi">3</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Note in the above example that the filtering expression is wrapped by curly brackets instead of normal
round bracket, since it specifies a function (closure) passed as argument of the <tt class="docutils literal"><span class="pre">grep</span></tt> operator.</p>
</div>
</div>
<div class="section" id="unique">
<h3>unique( )<a class="headerlink" href="#unique" title="Permalink to this headline">¶</a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">unique( )</span></tt> operator to remove duplicate items from a source channel and only emit single items with no repetition.</p>
<p>For example:</p>
<div class="highlight-python"><pre>Channel
    .from( 1,1,1,5,7,7,7,3,3 )
    .unique()
    .subscribe { println it }</pre>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="mi">1</span>
<span class="mi">5</span>
<span class="mi">7</span>
<span class="mi">3</span>
</pre></div>
</div>
<p>You can also specify an optional a function (closure) that customizes how it distinguishes between unique items.
For example</p>
<div class="highlight-python"><pre>Channel
    .from(1,3,4,5)
    .unique { it % 2 }
    .subscribe { println it }</pre>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="mi">1</span>
<span class="mi">4</span>
</pre></div>
</div>
</div>
<div class="section" id="distinct">
<h3>distinct( )<a class="headerlink" href="#distinct" title="Permalink to this headline">¶</a></h3>
<p>Use the distinct( ) method to remove duplicate consecutive items from a source channel. For example:</p>
<div class="highlight-python"><pre>Channel
    .from( 1,1,2,2,2,3,1,1,2,2,3 )
    .distinct()
    .subscribe onNext: { println it }, onComplete: { println 'Done' }</pre>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="mi">1</span>
<span class="mi">2</span>
<span class="mi">3</span>
<span class="mi">1</span>
<span class="mi">2</span>
<span class="mi">3</span>
<span class="n">Done</span>
</pre></div>
</div>
<p>You can also specify an optional a function (closure) that customizes how it distinguishes between distinct items.
For example:</p>
<div class="highlight-python"><pre>Channel
    .from( 1,1,2,2,2,3,1,1,2,4,6 )
    .distinct { it % 2 }
    .subscribe onNext: { println it }, onComplete: { println 'Done' }</pre>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="mi">1</span>
<span class="mi">2</span>
<span class="mi">3</span>
<span class="mi">2</span>
<span class="n">Done</span>
</pre></div>
</div>
</div>
<div class="section" id="first">
<h3>first( )<a class="headerlink" href="#first" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">first(</span> <span class="pre">)</span></tt> operator creates a channel that emits the first item emitted by the source channel, or the first
matching an optional condition. The condition can be a regular expression, a type or any closure evaluation a boolean expression. For example:</p>
<div class="highlight-python"><pre>// no condition is specified, emits the very first item: 1
Channel
    .from( 1, 2, 3 )
    .first()
    .subscribe { println it }


// emits the first String value: 'a'
Channel
    .from( 1, 2, 'a', 'b', 3 )
    .first( String )
    .subscribe { println it }

// emits the first item matching the regular expression: 'aa'
Channel
    .from( 'a', 'aa', 'aaa' )
    .first( ~/aa.*/ )
    .subscribe { println it }

// emits the first item for which the expression evaluates to true: 4
Channel
    .from( 1,2,3,4,5 )
    .first { it &gt; 3 }
    .subscribe { println it }</pre>
</div>
</div>
<div class="section" id="take">
<h3>take( )<a class="headerlink" href="#take" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">take(</span> <span class="pre">)</span></tt> emits only the first <cite>n</cite> items emitted by an channel. For example:</p>
<div class="highlight-python"><pre>Channel
    .from( 1,2,3,4,5,6 )
    .take( 3 )
    .subscribe onNext: { println it }, onComplete: { println 'Done' }</pre>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="mi">1</span>
<span class="mi">2</span>
<span class="mi">3</span>
<span class="n">Done</span>
</pre></div>
</div>
</div>
<div class="section" id="last">
<h3>last( )<a class="headerlink" href="#last" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">last(</span> <span class="pre">)</span></tt> operator creates a channel that only emits the last item emitted by a source channel.</p>
</div>
</div>
<div class="section" id="transforming-operators">
<h2>Transforming operators<a class="headerlink" href="#transforming-operators" title="Permalink to this headline">¶</a></h2>
<p>This section explains operators with which you can transform items that are emitted by channels.</p>
<div class="section" id="map">
<h3>map( )<a class="headerlink" href="#map" title="Permalink to this headline">¶</a></h3>
<p>Transform the items emitted by a channel by applying a function to each of them. For example:</p>
<div class="highlight-python"><pre>Channel
    .from( 1, 2, 3, 4, ,5 )
    .map { it * it  }
    .subscribe onNext: { println it }, onComplete: { println 'Done' }</pre>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="mi">1</span>
<span class="mi">4</span>
<span class="mi">9</span>
<span class="mi">16</span>
<span class="mi">25</span>
<span class="n">Done</span>
</pre></div>
</div>
</div>
<div class="section" id="mapwithindex">
<h3>mapWithIndex( )<a class="headerlink" href="#mapwithindex" title="Permalink to this headline">¶</a></h3>
<p>Transform the items emitted by channel by applying a function to each of them that takes both the emitted item and
the numerical index of that item in the source sequence, so that you can refer to both when you apply your transformation.</p>
<p>For example:</p>
<div class="highlight-python"><pre>Channel
    .from( 'a', 'b', 'c' )
    .mapWithIndex { item, index -&gt;  [item+item, index] }
    .subscribe onNext: { println it }, onComplete: { println 'Done' }</pre>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span> <span class="s">&#39;aa&#39;</span><span class="p">,</span> <span class="mi">0</span> <span class="p">]</span>
<span class="p">[</span> <span class="s">&#39;bb&#39;</span><span class="p">,</span> <span class="mi">1</span> <span class="p">]</span>
<span class="p">[</span> <span class="s">&#39;cc&#39;</span><span class="p">,</span> <span class="mi">2</span> <span class="p">]</span>
<span class="n">Done</span>
</pre></div>
</div>
</div>
<div class="section" id="mapmany">
<h3>mapMany( )<a class="headerlink" href="#mapmany" title="Permalink to this headline">¶</a></h3>
<p>Transform the items emitted by a channel by applying a function to each of them and then flattens the results of that function.</p>
<p>For example:</p>
<div class="highlight-python"><pre>// create a channel of numbers
numbers = Channel.from( 1, 2, 3 )

// map each number to a tuple (array), which items are emitted separately
results = numbers.mapMany { n -&gt; [ n*2, n*3 ] }

// print the final results
results.subscribe onNext: { println it }, onComplete: { println 'Done' }</pre>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="mi">2</span>
<span class="mi">3</span>
<span class="mi">4</span>
<span class="mi">6</span>
<span class="mi">6</span>
<span class="mi">9</span>
<span class="n">Done</span>
</pre></div>
</div>
<p>Associative arrays are manged in the same way. Fo example:</p>
<div class="highlight-python"><pre>Channel.from ( 1, 2, 3 )
       .mapMany { it -&gt; [ number: it, square: it*it ] }
       .subscribe { println it.key + ': ' + it.value }</pre>
</div>
<div class="highlight-python"><pre>number: 1
square: 1
number: 2
square: 4
number: 3
square: 9</pre>
</div>
</div>
<div class="section" id="reduce">
<h3>reduce( )<a class="headerlink" href="#reduce" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">reduce( )</span></tt> operator applies a function of your choosing to the first item emitted by a source channel,
then feeds the result of that function along with the second item emitted by the source channel into the same function,
then feeds the result of that function along with the third item into the same function, and so on until all items have been emitted by the source channel.</p>
<p>Finally it emits the final result from the final call to your function as the sole output from the returned channel.</p>
<p>For example:</p>
<div class="highlight-python"><pre>Channel
    .from( 1, 2, 3, 4, 5 )
    .reduce { a, b -&gt;  a+b }
    .subscribe onNext: { println it }, onComplete: { println 'Done' }</pre>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="mi">15</span>
<span class="n">Done</span>
</pre></div>
</div>
<p>There is also a version of <tt class="docutils literal"><span class="pre">reduce( )</span></tt> to which you can pass a seed item in addition to an accumulator function:</p>
<div class="highlight-python"><pre>myChannel.reduce( seedValue ) {  a, b -&gt; ... }</pre>
</div>
<p>The seed value is used to initialize the accumulator argument i.e. the <tt class="docutils literal"><span class="pre">a</span></tt> argument in the above example.</p>
</div>
<div class="section" id="groupby">
<h3>groupBy( )<a class="headerlink" href="#groupby" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">groupBy(</span> <span class="pre">)</span></tt> operator collects all the values emitted by the source channel grouping them by a key defined by
a user defined mapping function. When finished emits an associative array that maps each key with
the list of emitted values having that key.</p>
<p>For example:</p>
<div class="highlight-python"><pre>Channel
    .from('hello','ciao','hola', 'hi', 'bonjour')
    .groupBy { String str -&gt; str[0] }
    .subscribe { println it }</pre>
</div>
<div class="highlight-python"><pre>[ b:['bonjour'], c:['ciao'], h:['hello','hola','hi'] ]</pre>
</div>
<p>When the mapping function is omitted, the grouping key is defined as following:</p>
<ul class="simple">
<li>Any value of type <tt class="docutils literal"><span class="pre">Map</span></tt> is associated to the value of its first entry, or <tt class="docutils literal"><span class="pre">null</span></tt> when the map itself is empty.</li>
<li>Any value of type <tt class="docutils literal"><span class="pre">Map.Entry</span></tt> is associated to the value of its <tt class="docutils literal"><span class="pre">key</span></tt> attribute.</li>
<li>Any value of type <tt class="docutils literal"><span class="pre">Iterable</span></tt>, <tt class="docutils literal"><span class="pre">Collection</span></tt> or <tt class="docutils literal"><span class="pre">Array</span></tt> is associated to its first entry.</li>
<li>Any other value, the value itself is used as key.</li>
</ul>
</div>
<div class="section" id="buffer">
<h3>buffer( )<a class="headerlink" href="#buffer" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">buffer(</span> <span class="pre">)</span></tt> operator gathers the items emitted by the source channel into bundles and
and emits these bundles as its own emissions.</p>
<p>There are a number of ways with which you can regulate how <tt class="docutils literal"><span class="pre">buffer( )</span></tt> gathers items from
the source channel into bundles:</p>
<ul>
<li><p class="first"><tt class="docutils literal"><span class="pre">buffer(</span> <span class="pre">closingCondition</span> <span class="pre">)</span></tt>: starts to collect the values emitted by the channel into
a bundle until the <tt class="docutils literal"><span class="pre">closingCondition</span></tt> condition is verified, after that the bundle is emitted
to the returned channel and new values are gathered into a new bundle. The process is repeated until
the last value in the source channel is sent. The <tt class="docutils literal"><span class="pre">closingCondition</span></tt> can be specified as a
<cite>regular expression</cite>, a type or a value that have to be matched or any closure evaluating a
boolean expression to be satisfied. For example:</p>
<div class="highlight-python"><pre>Channel
    .from( 1,2,3,1,2,3 )
    .buffer { it == 2 }
    .subscribe {  println it }

// emitted values
[1,2]
[3,1,2]</pre>
</div>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">buffer(</span> <span class="pre">openingCondition,</span> <span class="pre">closingCondition</span> <span class="pre">)</span></tt>: starts to gather the value emitted by the channel
when the <tt class="docutils literal"><span class="pre">openingCondition</span></tt> is verified and on continue to buffer new emitted values until one of
them verify the <tt class="docutils literal"><span class="pre">closingCondition</span></tt>. After that the bundle is emitted and it continues applying the
describe logic until the last value is emitted by the source channel.
Both condition can be defined as a <cite>regular expression</cite>, a value literal, a value type or any closure
evaluating to a boolean expression. For example:</p>
<div class="highlight-python"><pre>Channel
    .from( 1,2,3,4,5,1,2,3,4,5,1,2 )
    .buffer( 2, 4 )
    .subscribe {  println it }

// emites bundles starting with '2' and ending with'4'
[2,3,4]
[2,3,4]</pre>
</div>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">buffer(</span> <span class="pre">count:</span> <span class="pre">n</span> <span class="pre">)</span></tt>: emits bundles made up of exactly <tt class="docutils literal"><span class="pre">n</span></tt> values. Incomplete bundles
are discarted. For example:</p>
<div class="highlight-python"><pre>Channel
    .from( 1,2,3,1,2,3,1 )
    .buffer( count: 2 )
    .subscribe {  println it }

// emitted values
[1, 2]
[3, 1]
[2, 3]</pre>
</div>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">buffer(</span> <span class="pre">count:</span> <span class="pre">n,</span> <span class="pre">skip:</span> <span class="pre">m</span> <span class="pre">)</span></tt>: like the previous emites bundles containing exactly <tt class="docutils literal"><span class="pre">n</span></tt> values,
but skip <cite>m</cite> values before to start gather values for the next bundle (including the first). For example:</p>
<div class="highlight-python"><pre>Channel
    .from( 1,2,3,4,5,1,2,3,4,5,1,2 )
    .buffer( count:3, skip:2 )
    .subscribe {  println it }

// emitted values
[3, 4, 5]
[3, 4, 5]</pre>
</div>
</li>
</ul>
</div>
<div class="section" id="flatten">
<h3>flatten( )<a class="headerlink" href="#flatten" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">flatten(</span> <span class="pre">)</span></tt> operator transforms the items emitted by a channel so that any <tt class="docutils literal"><span class="pre">Collection</span></tt> or <tt class="docutils literal"><span class="pre">Array</span></tt> object
value is converted to its single items and emitted separately. For example:</p>
<div class="highlight-python"><pre>Channel
    .from( [1,[2,3]], 4, [5,[6]] )
    .flatten()
    .subscribe { println it }</pre>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="mi">1</span>
<span class="mi">2</span>
<span class="mi">3</span>
<span class="mi">4</span>
<span class="mi">5</span>
<span class="mi">6</span>
</pre></div>
</div>
<p>See also: <a class="reference internal" href="#mapmany">mapMany( )</a></p>
</div>
<div class="section" id="tolist">
<h3>toList( )<a class="headerlink" href="#tolist" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">toList(</span> <span class="pre">)</span></tt> operator collects all the values emitted by a channel to a <tt class="docutils literal"><span class="pre">List</span></tt> object
and emits the resulting collection to the channel returned by the operator itself. For example:</p>
<div class="highlight-python"><pre>Channel
    .from( 1, 2, 3, 4 )
    .toList()
    .subscribe onNext: {  println it }, onComplete: 'Done'</pre>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
<span class="n">Done</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="combining-operators">
<h2>Combining operators<a class="headerlink" href="#combining-operators" title="Permalink to this headline">¶</a></h2>
<div class="section" id="into">
<h3>into( )<a class="headerlink" href="#into" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">into(</span> <span class="pre">)</span></tt> operator connects two channels so that values emitted by the source channel
are forwarded to target channel. For example:</p>
<div class="highlight-python"><pre>target = Channel.create()
target.subscribe { println it }

Channel
    .from( 'a', 'b', 'c', 'd' )
    .into( target )</pre>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="n">a</span>
<span class="n">b</span>
<span class="n">c</span>
<span class="n">d</span>
</pre></div>
</div>
<p>See also <a class="reference internal" href="#tap">tap( )</a> and <a class="reference internal" href="#route">route( )</a>.</p>
</div>
<div class="section" id="tap">
<h3>tap( )<a class="headerlink" href="#tap" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">tap(</span> <span class="pre">)</span></tt> operator, combines the functions of <a class="reference internal" href="#into">into( )</a> and <a class="reference internal" href="#split">split( )</a> operators, is a such way that
it connects two channels copying the values from the source into the <cite>tapped</cite> channel, at the same time
it splits the source channel into a newly create channel that is returned by the operator itself.</p>
<p>It may be convenient is some scenarios where may be required to concatenate multiple operation.</p>
<p>For example:</p>
<div class="highlight-python"><pre>log1 = Channel.create().subscribe { println "Log 1: $it" }
log2 = Channel.create().subscribe { println "Log 2: $it" }

Channel
    .from ( 'a', 'b', 'c' )
        .tap( log1 )
        .map { it * 2 }
        .tap( log2 )
        .subscribe { println "Result: $it" }</pre>
</div>
<div class="highlight-python"><pre>Log 1: a
Log 1: b
Log 1: c

Log 2: aa
Log 2: bb
Log 2: cc

Result: aa
Result: bb
Result: cc</pre>
</div>
<dl class="docutils">
<dt>See also:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#into">into( )</a></li>
<li><a class="reference internal" href="#split">split( )</a></li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="merge">
<h3>merge( )<a class="headerlink" href="#merge" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">merge(</span> <span class="pre">)</span></tt> operator let to join the items emitted by two (or more) channels into a new one.</p>
<p>For example, the following code merges together two channels, one of which emits a series of odd integers and the other
of which emits a series of even integers:</p>
<div class="highlight-python"><pre>odds  = Channel.from([1, 3, 5, 7, 9]);
evens = Channel.from([2, 4, 6]);

odds
    .merge( evens ) { o, e -&gt; [o, e] }
    .subscribe { println it }</pre>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
</pre></div>
</div>
<p>When merging more than two channels specify them by wrapping them with a list, as showed in the following example:</p>
<div class="highlight-python"><pre>channel1.merge( [channel2, channel3] ) {  item1, item2, item3 -&gt; item1 + item2 + item3 }</pre>
</div>
</div>
<div class="section" id="mix">
<h3>mix( )<a class="headerlink" href="#mix" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">mix(</span> <span class="pre">)</span></tt> operator combines the items emitted by two (or more) channels into a single channel.</p>
<p>For example:</p>
<div class="highlight-python"><pre>c1 = Channel.from( 1,2,3 )
c2 = Channel.from( 'a','b' )
c3 = Channel.form( 'z' )

c1 .mix(c2,c3)
   .subscribe onNext: { println it }, onComplete: { println 'Done' }</pre>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="mi">1</span>
<span class="mi">2</span>
<span class="mi">3</span>
<span class="s">&#39;a&#39;</span>
<span class="s">&#39;b&#39;</span>
<span class="s">&#39;z&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The items emitted by the resulting mixed channel may appear in any order,
regardless of which source channel they came from. So also the following example
may be a valid result of the above example.</p>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="s">&#39;z&#39;</span>
<span class="mi">1</span>
<span class="s">&#39;a&#39;</span>
<span class="mi">2</span>
<span class="s">&#39;b&#39;</span>
<span class="mi">3</span>
</pre></div>
</div>
</div>
<div class="section" id="phase">
<h3>phase( )<a class="headerlink" href="#phase" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">phase(</span> <span class="pre">)</span></tt> operator creates a channel that synchronize the values emitted by two source channels,
so that emitted items have the same key.</p>
<p>The key is defined by default as the first entry in a array, list or map object,
or the object itself for any other data type.</p>
<p>For example:</p>
<div class="highlight-python"><pre>ch1 = Channel.from( 1,2,3 )
ch2 = Channel.from( 1,0,0,2,7,8,9,3 )

result = ch1.phase(ch2).subscribe { println it }</pre>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span>
<span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
<p>An optional function can be provided in order to specify a custom key mapping strategy. For example:</p>
<div class="highlight-python"><pre>ch1 = Channel.from( [sequence: 'aaaaaa', key: 1], [sequence: 'bbbbbb', key: 2] )
ch2 = Channel.from( [val: 'zzzz', id: 3], [val: 'xxxxx', id: 1], [val: 'yyyyy', id: 2])

// provide a custom function in order to get the right id depending the map
result = ch1.phase(ch2) { Map it -&gt;

    if( it.containsKey('key') ) {
        return it.key
    }
    else if( it.containsKey('id') ) {
        return it.id
    }
    return null

}</pre>
</div>
<div class="highlight-python"><pre>[ [sequence: 'aaaaaa', key: 1], [val: 'xxxxx', id: 1] ]
[ [sequence: 'bbbbbb', key: 2], [val: 'yyyyy', id: 2] ]</pre>
</div>
</div>
<div class="section" id="spread">
<h3>spread( )<a class="headerlink" href="#spread" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">spread(</span> <span class="pre">)</span></tt> operator combines the items emitted by the source channel with all the values defined by an array or an <tt class="docutils literal"><span class="pre">Iterable</span></tt> object specified as argument.</p>
<p>For example:</p>
<div class="highlight-python"><pre>Channel
    .from(1,2,3)
    .spread(['a','b'])
    .subscribe onNext: { println it }, onComplete: { println 'Done' }</pre>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">]</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">]</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">]</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">]</span>
<span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">]</span>
<span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">]</span>
<span class="n">Done</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="forking-operators">
<h2>Forking operators<a class="headerlink" href="#forking-operators" title="Permalink to this headline">¶</a></h2>
<div class="section" id="split">
<h3>split( )<a class="headerlink" href="#split" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">split(</span> <span class="pre">)</span></tt> operator copies the items emitted by a source channel into one or multiple channels specified as argument.
For example:</p>
<div class="highlight-python"><pre>source = Channel.from( 'a', 'b', 'c' )
copy1 = Channel.create().subscribe { println "Channel 1 emit: " + it }
copy2 = Channel.create().subscribe { println "Channel 2 emit: " + it }

source.split( copy1, copy2 )</pre>
</div>
<div class="highlight-python"><pre>Channel 1 emit: a
Channel 1 emit: b
Channel 1 emit: c

Channel 2 emit: a
Channel 2 emit: b
Channel 2 emit: c</pre>
</div>
<p>See also: <a class="reference internal" href="#tap">tap( )</a></p>
</div>
<div class="section" id="choice">
<h3>choice( )<a class="headerlink" href="#choice" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>queue1.choice([queue2, queue3, queue4]) {a -&gt; a % 3}</pre>
</div>
</div>
<div class="section" id="separate">
<h3>separate( )<a class="headerlink" href="#separate" title="Permalink to this headline">¶</a></h3>
<p>Separation is the opposite operation to merge. The supplied closure returns a list of values, each of which will be output into an output channel with the corresponding position index.</p>
<div class="highlight-python"><pre>queue1.separate([queue2, queue3, queue4]) {a -&gt; [a-1, a, a+1]}

def (queue2, queue3, queue4) = queue1.separate(3) {a -&gt; [a-1, a, a+1]}</pre>
</div>
</div>
<div class="section" id="route">
<h3>route( )<a class="headerlink" href="#route" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">route(</span> <span class="pre">)</span></tt> operator forwards the items emitted by the source channel to a set of channels according
a the map specified as a parameter. For example:</p>
<div class="highlight-python"><pre>channel1 = Channel.create()

Channel
    .from(1,3,2,1,1,2,1,4,2)</pre>
</div>
<p>TODO</p>
<p>See also: <a class="reference internal" href="#into">into( )</a></p>
</div>
</div>
<div class="section" id="math-operators">
<h2>Math operators<a class="headerlink" href="#math-operators" title="Permalink to this headline">¶</a></h2>
<p>This section explains operators that perform mathematical operations on the items emitted by channels.</p>
<div class="section" id="count">
<h3>count( )<a class="headerlink" href="#count" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">count(</span> <span class="pre">)</span></tt> operator creates a channel that emits a single item: a number that represents the total number of
items emitted by the source channel.</p>
<p>An optional parameter can be specified representing the condition to be satisfied by the item to count. For example:</p>
<div class="highlight-python"><pre>Channel
    .from(9,1,7,5)
    .count()
    .subscribe { println it }
// -&gt; 4


Channel
    .from(4,1,7,1,1)
    .count(1)
    .subscribe { println it }
 // -&gt; 3

Channel
    .from('a','c','c','q','b')
    .count ( ~/c/ )
    .subscribe { println it }
// -&gt; 2</pre>
</div>
</div>
<div class="section" id="countby">
<h3>countBy( )<a class="headerlink" href="#countby" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">countBy(</span> <span class="pre">)</span></tt> creates a channel which emits an associative array (map object) counting the occurence of the emitted
items in the source channel. For example:</p>
<div class="highlight-python"><pre>Channel
    .from( 'x', 'y', 'x', 'x', 'z', 'y' )
    .countBy()
    .subscribe { println it }</pre>
</div>
<div class="highlight-python"><pre>[x:3, y:2, z:1]</pre>
</div>
<p>A optional grouping criteria can be specified by a function (closure) mapping each item to a grouping key. For example:</p>
<div class="highlight-python"><pre>Channel
    .from( 'hola', 'hello', 'ciao', 'bonjour', 'halo' )
    .countBy { it[0] }
    .subscribe { println it }</pre>
</div>
<div class="highlight-python"><pre>[h:3, c:1, b:1]</pre>
</div>
</div>
<div class="section" id="min">
<h3>min( )<a class="headerlink" href="#min" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">min( )</span></tt> operator waits until the source channel completes, and then emits the value that had the lowest value.
For example:</p>
<div class="highlight-python"><pre>Channel
    .from( 8, 6, 2, 5 )
    .min()
    .subscribe { println "Min value is $it" }</pre>
</div>
<div class="highlight-python"><pre>Min value is 2</pre>
</div>
</div>
<div class="section" id="max">
<h3>max( )<a class="headerlink" href="#max" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">max( )</span></tt> operator waits until the source channel completes, and then emits the value that had the greatest value.
For example:</p>
<div class="highlight-python"><pre>Channel
    .from( 8, 6, 2, 5 )
    .min()
    .subscribe { println "Max value is $it" }</pre>
</div>
<div class="highlight-python"><pre>Max value is 8</pre>
</div>
</div>
<div class="section" id="sum">
<h3>sum( )<a class="headerlink" href="#sum" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">sum( )</span></tt> operators crates a channel that emits the sum of all values emitted by the source channel to which is applied.
For example:</p>
<div class="highlight-python"><pre>Channel
    .from( 8, 6, 2, 5 )
    .min()
    .subscribe { println "The sum is $it" }</pre>
</div>
<div class="highlight-python"><pre>The sum is 21</pre>
</div>
</div>
</div>
</div>


          <footer>
  
    <div class="rst-footer-buttons">
      
        <a href="process.html" class="btn btn-neutral float-right" title="Process"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="channel.html" class="btn btn-neutral" title="Channel"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <br><br>

  <div id="disqus_thread"></div>
<script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'nextflow-docs'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

  <hr/>

  <p>
      &copy; Copyright 2013, Paolo Di Tommaso.
  </p>

  <a href="https://www.github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="http://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  

</body>
</html>